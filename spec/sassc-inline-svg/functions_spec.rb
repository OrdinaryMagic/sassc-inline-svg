# encoding: UTF-8
# frozen_string_literal: true

RSpec.describe 'Functions' do
  let(:dummy_class) { Class.new { extend SassC::InlineSVG::Functions } }
  let(:options) { nil }
  let(:path) { OpenStruct.new(value: file_path) }

  subject { dummy_class.inline_svg(path, options) }

  context 'when file present' do
    let(:file_path) { 'spec/support/files/example.svg' }

    context 'without options' do
      it 'returns encoded url' do
        expect(subject).to eq("url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%2235%2025%2030%2050%22%20version%3D%221.1%22%3E%0A%20%20%3Cg%20fill%3D%22fillcolor%22%3E%0A%20%20%20%20%3Cpath%20d%3D%22M67.5251263%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C68.8919613%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2071.1080387%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2072.4748737%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C73.8417088%2C61.1080387%0A%20%20%20%20%20%20%20%20%20%20%20%20%2073.8417088%2C58.8919613%0A%20%20%20%20%20%20%20%20%20%20%20%20%2072.4748737%2C57.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L52.4748737%2C37.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C51.1080387%2C36.1582912%0A%20%20%20%20%20%20%20%20%20%20%20%20%2048.8919613%2C36.1582912%0A%20%20%20%20%20%20%20%20%20%20%20%20%2047.5251263%2C37.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L27.5251263%2C57.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C26.1582912%2C58.8919613%0A%20%20%20%20%20%20%20%20%20%20%20%20%2026.1582912%2C61.1080387%0A%20%20%20%20%20%20%20%20%20%20%20%20%2027.5251263%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C28.8919613%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2031.1080387%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2032.4748737%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L50.0095722%2C44.9401752%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L67.5251263%2C62.4748737%20Z%22%0A%20%20%20%20%20%20%20%20%20%20transform%3D%22translate%2850.000000%2C%2050.000000%29%20rotate%28-90.000000%29%20translate%28-50.000000%2C%20-50.000000%29%20%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E')")
      end
    end

    context 'with options' do
      let(:options) { OpenStruct.new(value: { OpenStruct.new(value: 'fillcolor') => OpenStruct.new(value: '#0e4573')}) }

      it 'returns encoded url' do
        expect(subject).to eq("url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%2235%2025%2030%2050%22%20version%3D%221.1%22%3E%0A%20%20%3Cg%20fill%3D%22%230e4573%22%3E%0A%20%20%20%20%3Cpath%20d%3D%22M67.5251263%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C68.8919613%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2071.1080387%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2072.4748737%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C73.8417088%2C61.1080387%0A%20%20%20%20%20%20%20%20%20%20%20%20%2073.8417088%2C58.8919613%0A%20%20%20%20%20%20%20%20%20%20%20%20%2072.4748737%2C57.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L52.4748737%2C37.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C51.1080387%2C36.1582912%0A%20%20%20%20%20%20%20%20%20%20%20%20%2048.8919613%2C36.1582912%0A%20%20%20%20%20%20%20%20%20%20%20%20%2047.5251263%2C37.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L27.5251263%2C57.5251263%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C26.1582912%2C58.8919613%0A%20%20%20%20%20%20%20%20%20%20%20%20%2026.1582912%2C61.1080387%0A%20%20%20%20%20%20%20%20%20%20%20%20%2027.5251263%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20C28.8919613%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2031.1080387%2C63.8417088%0A%20%20%20%20%20%20%20%20%20%20%20%20%2032.4748737%2C62.4748737%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L50.0095722%2C44.9401752%0A%20%20%20%20%20%20%20%20%20%20%20%20%20L67.5251263%2C62.4748737%20Z%22%0A%20%20%20%20%20%20%20%20%20%20transform%3D%22translate%2850.000000%2C%2050.000000%29%20rotate%28-90.000000%29%20translate%28-50.000000%2C%20-50.000000%29%20%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E')")
      end
    end
  end

end